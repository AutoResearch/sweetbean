<!DOCTYPE html>
<head>
<title>My awesome experiment</title><script src="https://unpkg.com/jspsych@7.3.1"></script>
<script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.2"></script>
<script src="https://unpkg.com/@jspsych/plugin-survey-text@1.1.2"></script>
<script src="https://unpkg.com/@jspsych/plugin-survey-multi-choice@1.1.2"></script>
<script src="https://unpkg.com/@jspsych/plugin-survey-likert@1.1.2"></script>
<script src="https://unpkg.com/@jspsych/plugin-survey-likert@1.1.2"></script>
<link href="https://unpkg.com/jspsych@7.3.1/css/jspsych.css" rel="stylesheet" type="text/css"/>
<script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response@1.1.2"></script>
<script src="https://unpkg.com/@jspsych/plugin-video-keyboard-response@1.1.2"></script>
<script src="https://unpkg.com/@jspsych-contrib/plugin-rok@1.1.1"></script>
<script src="https://unpkg.com/@jspsych-contrib/plugin-html-choice@1.0.0"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetbean@0.0.6/dist/runtime-script.js"></script>
<link href="https://cdn.jsdelivr.net/npm/sweetbean@0.0.6/dist/style/main.css" rel="stylesheet" type="text/css"/>
<link href="https://cdn.jsdelivr.net/npm/sweetbean@0.0.6/dist/style/bandit.css" rel="stylesheet" type="text/css"/>
</head>
<body></body>
<script>
let score=0;
// Store data:
jsPsych = initJsPsych();
trials = [
{timeline: [{type: jsPsychHtmlChoice,trial_duration:()=>{let trial_duration=null;return trial_duration},html_array:()=>{let html_array=((bdts) => {var n=len(bdts);var cols=Math.ceil(Math.sqrt(n));var rows=Math.ceil(__truediv__(n,cols));var square_width=__truediv__(__sub__(100,__mul__(__add__(cols,1),10)),cols);var square_height=__truediv__(__sub__(100,
__mul__(__add__(rows,1),10)),rows);var square_size=min(square_width,square_height);var positions=[];for(var r=0;r<rows;r++){if(__eq__(r,__sub__(rows,1))&&__ne__(__mod__(n,cols),0))var row_squares=__mod__(n,cols);else var row_squares=cols;var total_row_width=__add__(__mul__(row_squares,square_size),__mul__(__sub__(row_squares,1),10));var start_x=__truediv__(__sub__(100,total_row_width),2);for(var c=0;c<row_squares;c++){var x=__add__(start_x,__mul__(c,__add__(square_size,10)));var y=__add__(10,__mul__(r,
__add__(square_size,10)));positions.append(tuple([x,y,square_size]))}}var html=[];for(var [bdt,p]of zip(bdts,positions))html.append(`<div class="slotmachine" style="position: absolute; top:${p[1]}vh; left:${p[0]}vw; width: ${p[2]}vw; height: ${p[2]}vh; border-color: ${bdt["color"]}"></div>`);return html})([jsPsych.timelineVariable('bandit_1'),jsPsych.timelineVariable('bandit_2'),jsPsych.timelineVariable('bandit_3')]);return html_array},values:()=>{let values=((bdts) => {return function(){var __accu0__=[];for(var b of bdts)__accu0__.append(b["value"]);return __accu0__}()})([jsPsych.timelineVariable('bandit_1'),jsPsych.timelineVariable('bandit_2'),jsPsych.timelineVariable('bandit_3')]);return values},time_after_response:()=>{let time_after_response=2000;return time_after_response},on_load:()=>{const root=document.documentElement;root.style.setProperty("--slotmachine-time",`${(2000)/2}ms`);root.style.setProperty("--slotmachine-time-after",`${(2000)/2}ms`);},on_finish:(data)=>{let trial_duration=null;data["bean_trial_duration"]=trial_duration;let duration=null;data["bean_duration"]=duration;let html_array=((bdts) => {var n=len(bdts);var cols=Math.ceil(Math.sqrt(n));var rows=Math.ceil(__truediv__(n,cols));var square_width=__truediv__(__sub__(100,__mul__(__add__(cols,1),10)),cols);var square_height=__truediv__(__sub__(100,
__mul__(__add__(rows,1),10)),rows);var square_size=min(square_width,square_height);var positions=[];for(var r=0;r<rows;r++){if(__eq__(r,__sub__(rows,1))&&__ne__(__mod__(n,cols),0))var row_squares=__mod__(n,cols);else var row_squares=cols;var total_row_width=__add__(__mul__(row_squares,square_size),__mul__(__sub__(row_squares,1),10));var start_x=__truediv__(__sub__(100,total_row_width),2);for(var c=0;c<row_squares;c++){var x=__add__(start_x,__mul__(c,__add__(square_size,10)));var y=__add__(10,__mul__(r,
__add__(square_size,10)));positions.append(tuple([x,y,square_size]))}}var html=[];for(var [bdt,p]of zip(bdts,positions))html.append(`<div class="slotmachine" style="position: absolute; top:${p[1]}vh; left:${p[0]}vw; width: ${p[2]}vw; height: ${p[2]}vh; border-color: ${bdt["color"]}"></div>`);return html})([jsPsych.timelineVariable('bandit_1'),jsPsych.timelineVariable('bandit_2'),jsPsych.timelineVariable('bandit_3')]);data["bean_html_array"]=html_array;let values=((bdts) => {return function(){var __accu0__=[];for(var b of bdts)__accu0__.append(b["value"]);return __accu0__}()})([jsPsych.timelineVariable('bandit_1'),jsPsych.timelineVariable('bandit_2'),jsPsych.timelineVariable('bandit_3')]);data["bean_values"]=values;let time_after_response=2000;data["bean_time_after_response"]=time_after_response;let type='jsPsychHtmlChoice';data["bean_type"]=type;data["bean_value"] = data["value"];data["bean_response"] = data["choice"];score=((sc,val) => {return __add__(sc,val)})(score, data["bean_value"]);data["bean_score"]=score;}},{type: jsPsychHtmlKeyboardResponse,trial_duration:()=>{let trial_duration=1000;return trial_duration},stimulus:()=>{let stimulus=((cl,txt) => {return`<div style='color:${cl}'>${txt}</div>`})('white', score);return stimulus},choices:()=>{let choices=[];return choices},correct_key:()=>{let correct_key='';return correct_key},on_finish:(data)=>{let trial_duration=1000;data["bean_trial_duration"]=trial_duration;let duration=1000;data["bean_duration"]=duration;let stimulus=((cl,txt) => {return`<div style='color:${cl}'>${txt}</div>`})('white', score);data["bean_stimulus"]=stimulus;let choices=[];data["bean_choices"]=choices;let correct_key='';data["bean_correct_key"]=correct_key;let type='jsPsychHtmlKeyboardResponse';data["bean_type"]=type;data["bean_correct"]=data["bean_correct_key"]===data["response"];}}], timeline_variables: [{'bandit_1': {'color': 'orange', 'value': 10}, 'bandit_2': {'color': 'blue', 'value': 0}, 'bandit_3': {'color': 'red', 'value': 5}}, {'bandit_1': {'color': 'orange', 'value': 9}, 'bandit_2': {'color': 'blue', 'value': 1}, 'bandit_3': {'color': 'red', 'value': 5}}, {'bandit_1': {'color': 'orange', 'value': 8}, 'bandit_2': {'color': 'blue', 'value': 2}, 'bandit_3': {'color': 'red', 'value': 5}}, {'bandit_1': {'color': 'orange', 'value': 7}, 'bandit_2': {'color': 'blue', 'value': 3}, 'bandit_3': {'color': 'red', 'value': 5}}, {'bandit_1': {'color': 'orange', 'value': 6}, 'bandit_2': {'color': 'blue', 'value': 4}, 'bandit_3': {'color': 'red', 'value': 5}}]}]
;jsPsych.run(trials)</script>
</html>