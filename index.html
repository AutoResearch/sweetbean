<!DOCTYPE html>
<head>
    <title>My awesome expmeriment</title>
    <script src="https://unpkg.com/jspsych@7.3.1"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.2"></script>
    <link href="https://unpkg.com/jspsych@7.3.1/css/jspsych.css" rel="stylesheet" type="text/css"/>
    <style>
        body {
            background: #000;
            color: #fff;
        }

        div {
            font-size: 24pt
        }

        .sweetbean-square {
            width: 10vw;
            height: 10vw
        }

        .sweetbean-circle {
            width: 10vw;
            height: 10vw;
            border-radius: 50%
        }

        .sweetbean-triangle {
            width: 0;
            height: 0;
            border-left: 5vw solid transparent;
            border-right: 5vw solid transparent
        }

        .feedback-screen-red {
            position: absolute;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            background: red
        }

        .feedback-screen-green {
            position: absolute;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            background: green
        }</style>
</head>
<body>
<script>
    jsPsych = initJsPsych();
    trials = [
        {
            timeline: [{
                type: jsPsychHtmlKeyboardResponse, trial_duration: "400", stimulus: () => {
                    let symbol = () => {
                        if ((jsPsych.timelineVariable('task') === "word_naming")) {
                            return "square"
                        }
                        if ((jsPsych.timelineVariable('task') === "color_naming")) {
                            return "triangle"
                        }
                    };
                    let color = "white";
                    let symbol_class = symbol();
                    let c = "sweetbean-" + symbol_class;
                    return "<div class='" + c + "' style=" + "'background: " + (symbol() == "triangle" ? "transparent" : color) + (symbol() == "triangle" ? "; border-bottom: solid 10vw " + color : "") + "'></div>"
                }, choices: []
            }, {
                type: jsPsychHtmlKeyboardResponse,
                trial_duration: "500",
                stimulus: "<div>+</div>",
                response_ends_trial: false
            }, {
                type: jsPsychHtmlKeyboardResponse, trial_duration: "2000", stimulus: () => {
                    let color = jsPsych.timelineVariable('color');
                    let text = jsPsych.timelineVariable('word');
                    return "<div style='color: " + color + "'>" + text + '</div>'
                }, choices: ['j', 'n', 'd', 'f'], on_finish: (data) => {
                    let correct = () => {
                        if ((jsPsych.timelineVariable('response') === "red")) {
                            return "j"
                        }
                        if ((jsPsych.timelineVariable('response') === "green")) {
                            return "n"
                        }
                        if ((jsPsych.timelineVariable('response') === "yellow")) {
                            return "d"
                        }
                        if ((jsPsych.timelineVariable('response') === "blue")) {
                            return "f"
                        }
                    }
                    data["correct"] = correct() == data["response"]
                }
            }, {type: jsPsychHtmlKeyboardResponse, trial_duration: "400", stimulus: "", choices: []}],
            timeline_variables: []
        }]
    jsPsych.run(trials)
</script>
</body>
</html>